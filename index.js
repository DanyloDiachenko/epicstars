/* Translation Strings */
const translations = {
    ua: {
        headerLogoAlt: "Логотип",
        headerHelp: "Допомога",
        headerBlog: "Блог",
        headerTraining: "Навчання",
        headerBloggerCatalog: "Каталог блогерів",
        headerLogin: "Увійти",
        headerRegistration: "Реєстрація",
        headerMenu: "Меню",
        /*  */
        mainTitle: "EPICSTARS — платформа, що об’єднує ",
        mainHighlightAdvertisers: "рекламодавців",
        mainHighlightAnd: " та ",
        mainHighlightBlogers: "блогерів",
        mainSubtitle:
            "Допомагаємо брендам та компаніям транслювати свої маркетингові активності через лідерів думок та блогерів",
        mainCta: "давайте почнемо!",
        mainBannerAlt: "Баннер",
        /*  */
        service1Title: "Інтернет маркетинг",
        service1Desc:
            "Досвідчені маркетологи компанії Skyweb займаються побудовою ефективних інтернет маркетинг стратегій.",
        serviceMore: "Дізнатися більше",
        service2Title: "Веб Розробка",
        service2Desc:
            "В Skyweb ви можете замовити розробку сайту згідно з наданим технічним завданням.",
        service3Title: "SEO Оптимізація",
        service3Desc:
            "Команда професіоналів виконує комплексний аналіз сайту і оптимізує SEO показники.",
        service4Title: "Розробка Додатків",
        service4Desc:
            "Ми робимо додатки для мобільних пристроїв з подальшою підтримкою при релізі в маркетплейси.",
        service5Title: "Ускорення Сайта",
        service5Desc:
            "Ми знаємо, як прискорити ваш сайт. Розробники збільшують швидкість завантаження і роблять це якісно.",
        service6Title: "SEO Копірайтинг",
        service6Desc:
            "Велика команда копірайтерів в короткі терміни пише унікальні SEO тексти для сайту з ключовими словами.",
        /*  */
        aboutBannerAlt: "Про нашу компанію",
        aboutSubtitle: "Про нашу компанію",
        aboutMission:
            "Наше завдання – Забезпечити бізнес грамотною системою маркетингу",
        aboutDescription:
            "Компанія Skyweb надає послуги професійних інтернет-маркетологів клієнтам по всьому світу. Серед найбільш затребуваних послуг, спрямованих на розвиток бізнесу, є наступні:",
        aboutWebDevSkill: "Веб розробка",
        aboutSeoSkill: "SEO Оптимізація",
        aboutMarketingSkill: "Інтернет Маркетинг",
        aboutMobileDevSkill: "Мобільна розробка",
        /*  */
        whyChooseUsSubtitle: "Чому обирають нас?",
        whyChooseUsTitle:
            "Продвигайте свій бренд в інтернеті з сучасними ІТ рішеннями",
        whyChooseUsDescription:
            "Досвідчена веб студія Skyweb несе повну відповідальність за надані послуги і гарантує наступні переваги:",
        whyChooseUsAdvantage: "Приємні співробітники",
        whyChooseUsBannerAlt: "Чому обирають нас?",
        /*  */
        timeInItTitle: "Більше 6 років досвіду в галузі IT",
        timeInItYearsInDevelopment: "Років у розробці",
        timeInItSuccessfulProjects: "Виконаних проектів",
        timeInItSatisfiedClients: "Задоволених клієнтів",
        timeInItEmployees: "Співробітників",
        /*  */
        joinUsSubtitle: "Кар'єра в IT",
        joinUsTitle: "Вступайте в нашу команду",
        jobWebDeveloper: "Веб розробник",
        jobSeoSpecialist: "SEO спеціаліст",
        jobInternetMarketer: "Інтернет маркетолог",
        jobSeoCopywriter: "SEO копірайтер",
        jobGraphicDesigner: "Графічний дизайнер",
        jobUxUiDesigner: "UX/UI дизайнер",
        jobCompanyManager: "Менеджер компанії",
        jobSolutionTester: "Тестувальник рішень",
        jobOtherActivity: "Інша діяльність",
        /*  */
        footerBannerAlt: "Залиште заявку на зворотний зв'язок",
        footerContactUs: "Зв'яжіться з нами",
        footerCallToAction: "Залиште заявку на зворотний зв'язок",
        footerYourName: "Ваше ім'я",
        footerEmail: "Email",
        footerSend: "Відправити",
        footerRights: "Copyright 2019-2022 © Skyweb Co. Всі права захищені.",
        footerYourName: "Ваше ім'я",
        footerEmail: "Email",
        footerSend: "Відправити",
        footerNameError: "Це поле - обовʼязкове!",
        footerEmailLengthError: "Це поле - обовʼязкове!",
        footerEmailValidateError: "Уведіть валідний email!",
        footerCaptchaError: "Підтвердіть, що Ви не робот!",
        footerSuccessMessage: "Дякуємо, успішно відправлено",
    },
    eng: {
        headerLogoAlt: "Logo",
        headerHelp: "Help",
        headerBlog: "Blog",
        headerTraining: "Training",
        headerBloggerCatalog: "Blogger Catalog",
        headerLogin: "Login",
        headerRegistration: "Registration",
        headerMenu: "Menu",
        /*  */
        mainTitle: "EPICSTARS — a platform uniting ",
        mainHighlightAdvertisers: "advertisers",
        mainHighlightAnd: " and ",
        mainHighlightBlogers: "bloggers",
        mainSubtitle:
            "We help brands and companies broadcast their marketing activities through opinion leaders and bloggers",
        mainCta: "let's get started!",
        mainBannerAlt: "Banner",
        /*  */
        service1Title: "Internet Marketing",
        service1Desc:
            "Experienced marketers at Skyweb are engaged in building effective internet marketing strategies.",
        serviceMore: "Learn more",
        service2Title: "Web Development",
        service2Desc:
            "At Skyweb, you can order website development according to the provided technical task.",
        service3Title: "SEO Optimization",
        service3Desc:
            "A team of professionals performs a comprehensive analysis of the site and optimizes SEO indicators.",
        service4Title: "App Development",
        service4Desc:
            "We make applications for mobile devices with subsequent support upon release in marketplaces.",
        service5Title: "Site Acceleration",
        service5Desc:
            "We know how to speed up your site. Developers increase the loading speed and do it qualitatively.",
        service6Title: "SEO Copywriting",
        service6Desc:
            "A large team of copywriters quickly writes unique SEO texts for the site with keywords.",
        /*  */
        aboutBannerAlt: "About our company",
        aboutSubtitle: "About our company",
        aboutMission:
            "Our task is to provide business with a competent marketing system",
        aboutDescription:
            "Skyweb offers services of professional internet marketers to clients around the world. Among the most in-demand services aimed at business development are the following:",
        aboutWebDevSkill: "Web Development",
        aboutSeoSkill: "SEO Optimization",
        aboutMarketingSkill: "Internet Marketing",
        aboutMobileDevSkill: "Mobile Development",
        /*  */
        whyChooseUsSubtitle: "Why choose us?",
        whyChooseUsTitle: "Promote your brand online with modern IT solutions",
        whyChooseUsDescription:
            "Experienced web studio Skyweb takes full responsibility for the provided services and guarantees the following advantages:",
        whyChooseUsAdvantage: "Friendly staff",
        whyChooseUsBannerAlt: "Why choose us?",
        /*  */
        timeInItTitle: "More than 6 years of experience in IT",
        timeInItYearsInDevelopment: "Years in development",
        timeInItSuccessfulProjects: "Successful projects",
        timeInItSatisfiedClients: "Satisfied clients",
        timeInItEmployees: "Employees",
        /*  */
        joinUsSubtitle: "Career in IT",
        joinUsTitle: "Join our team",
        jobWebDeveloper: "Web Developer",
        jobSeoSpecialist: "SEO Specialist",
        jobInternetMarketer: "Internet Marketer",
        jobSeoCopywriter: "SEO Copywriter",
        jobGraphicDesigner: "Graphic Designer",
        jobUxUiDesigner: "UX/UI Designer",
        jobCompanyManager: "Company Manager",
        jobSolutionTester: "Solution Tester",
        jobOtherActivity: "Other Activity",
        /*  */
        footerBannerAlt: "Submit a request for feedback",
        footerContactUs: "Contact us",
        footerCallToAction: "Submit a request for feedback",
        footerYourName: "Your name",
        footerEmail: "Email",
        footerSend: "Send",
        footerRights: "Copyright 2019-2022 © Skyweb Co. All rights reserved.",
        footerYourName: "Your name",
        footerEmail: "Email",
        footerSend: "Send",
        footerNameError: "This field is required!",
        footerEmailLengthError: "This field is required!",
        footerEmailValidateError: "Please enter a valid email!",
        footerCaptchaError: "Please verify that you are not a robot!",
        footerSuccessMessage: "Thank you, successfully sent",
    },
};

/* Form & Inputes & Messages */
const applicationForm = document.querySelector("#application-form");
const applicationFormNameInput = document.querySelector(
    "#application-form-name",
);
const applicationFormEmailInput = document.querySelector(
    "#application-form-email",
);
const applicationFormSuccessMessage = document.querySelector(
    "#application-form-success",
);
const applicationFormNameErrorMessage = document.querySelector(
    "#application-form-name-error",
);
const applicationFormEmailLengthErrorMessage = document.querySelector(
    "#application-form-email-length-error",
);
const applicationFormEmailValidateErrorMessage = document.querySelector(
    "#application-form-email-validate-error",
);
const applicationFormCaptchaErrorMessage = document.querySelector(
    "#application-form-captcha-error",
);

/* Header Menus */
const navigationMenu = document.querySelector("#navigation-menu");
const burgerButton = document.querySelector("#burger-button");

/* Email Validation */
const validateEmail = (email) => {
    const pattern =
        /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return pattern.test(email);
};

/* Submit Application Form Handler */
applicationForm.addEventListener("submit", (e) => {
    e.preventDefault();

    let isValid = true;

    document.querySelectorAll(".error").forEach((el) => {
        el.style.display = "none";
    });
    applicationFormSuccessMessage.style.display = "none";

    if (!applicationFormNameInput.value.trim()) {
        applicationFormNameErrorMessage.style.display = "block";
        isValid = false;
    }

    if (!applicationFormEmailInput.value.trim()) {
        applicationFormEmailLengthErrorMessage.style.display = "block";
        isValid = false;
    } else if (!validateEmail(applicationFormEmailInput.value)) {
        applicationFormEmailValidateErrorMessage.style.display = "block";
        isValid = false;
    }

    const captchaResponse = grecaptcha.getResponse();
    if (!captchaResponse) {
        applicationFormCaptchaErrorMessage.style.display = "block";
        isValid = false;
    }

    if (isValid) {
        try {
            applicationFormSuccessMessage.style.display = "block";
            setTimeout(() => {
                applicationFormNameInput.value = "";
                applicationFormEmailInput.value = "";
                grecaptcha.reset();
                applicationFormSuccessMessage.style.display = "none";
            }, 3000);
        } catch (error) {
            console.error(error);
        }
    }
});

/* Cookies Handlers */
const setCookie = (name, value, days) => {
    const d = new Date();
    d.setTime(d.getTime() + days * 24 * 60 * 60 * 1000);
    const expires = "expires=" + d.toUTCString();
    document.cookie = name + "=" + value + ";" + expires + ";path=/";
};
const getCookie = (name) => {
    const nameEQ = name + "=";
    const ca = document.cookie.split(";");
    for (let i = 0; i < ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0) === " ") c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) === 0)
            return c.substring(nameEQ.length, c.length);
    }
    return null;
};

/* Changing Language Handler */
const changeLanguage = (lng) => {
    setCookie("language", lng, 30);
    const elements = document.querySelectorAll("[data-lang]");
    elements.forEach((el) => {
        const key = el.getAttribute("data-lang");
        if (el.tagName === "IMG") {
            el.alt = translations[lng][key];
        } else if (el.tagName === "INPUT") {
            el.placeholder = translations[lng][key];
        } else if (el.children.length > 0) {
            let foundTextNode = false;
            Array.from(el.childNodes).forEach((node) => {
                if (node.nodeType === Node.TEXT_NODE && !foundTextNode) {
                    node.nodeValue = translations[lng][key];
                    foundTextNode = true;
                }
            });
            if (!foundTextNode) {
                const textNode = document.createTextNode(
                    translations[lng][key],
                );
                el.insertBefore(textNode, el.firstChild);
            }
        } else {
            el.textContent = translations[lng][key];
        }
    });

    const buttons = document.querySelectorAll(".languages button");
    buttons.forEach((button) => {
        if (button.innerText.toLowerCase() === lng) {
            button.classList.add("active");
        } else {
            button.classList.remove("active");
        }
    });
};

/* Set Language after page loading */
document.addEventListener("DOMContentLoaded", () => {
    const savedLanguage = getCookie("language") || "ua";
    changeLanguage(savedLanguage);
});

/* Opening Burger Menu (Mobile version) */
const onBurgerMenuClick = () => {
    if (navigationMenu.classList.contains("active")) {
        navigationMenu.classList.remove("active");
    } else {
        navigationMenu.classList.add("active");
    }
};
burgerButton.addEventListener("click", onBurgerMenuClick);

/* Closing Burger Menu if click not in Burger Menu */
document.addEventListener("click", (event) => {
    if (
        !burgerButton.contains(event.target) &&
        !navigationMenu.contains(event.target) &&
        navigationMenu.classList.contains("active")
    ) {
        navigationMenu.classList.remove("active");
    }
});
